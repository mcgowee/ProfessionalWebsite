import{s as Q,r as W}from"../chunks/scheduler.CZ49yVq8.js";import{S as X,i as Y,e as b,s as L,c as y,f as S,g as N,j as I,d as k,a as v,b as O,k as d,m as U,n as V,o as P,p as G,q as Z,r as $,t as A,h as F,l as z,u as ee,v as te,w as se,x as ae,y as ne}from"../chunks/index.9byxY5b-.js";import{e as B}from"../chunks/each.D6YF6ztN.js";import{S as re}from"../chunks/Spinner.Bw0mPyUs.js";function J(h,e,t){const s=h.slice();return s[6]=e[t].sender,s[7]=e[t].text,s[9]=t,s}function R(h){let e,t,s=h[6]+"",a,l,w,_=h[7]+"",u,f;return{c(){e=b("div"),t=b("strong"),a=A(s),l=A(":"),w=L(),u=A(_),this.h()},l(p){e=y(p,"DIV",{class:!0});var o=S(e);t=y(o,"STRONG",{});var m=S(t);a=F(m,s),l=F(m,":"),m.forEach(k),w=I(o),u=F(o,_),o.forEach(k),this.h()},h(){v(e,"class",f=h[6].toLowerCase()+"-message mb-2 svelte-1o1pti3")},m(p,o){O(p,e,o),d(e,t),d(t,a),d(t,l),d(e,w),d(e,u)},p(p,o){o&1&&s!==(s=p[6]+"")&&z(a,s),o&1&&_!==(_=p[7]+"")&&z(u,_),o&1&&f!==(f=p[6].toLowerCase()+"-message mb-2 svelte-1o1pti3")&&v(e,"class",f)},d(p){p&&k(e)}}}function K(h){let e,t,s;return t=new re({}),{c(){e=b("div"),ee(t.$$.fragment),this.h()},l(a){e=y(a,"DIV",{class:!0});var l=S(e);te(t.$$.fragment,l),l.forEach(k),this.h()},h(){v(e,"class","flex justify-center items-center mt-2")},m(a,l){O(a,e,l),se(t,e,null),s=!0},i(a){s||(P(t.$$.fragment,a),s=!0)},o(a){G(t.$$.fragment,a),s=!1},d(a){a&&k(e),ae(t)}}}function le(h){let e,t,s="Chat with Local LLM",a,l,w='<p><strong>This chat application is built with <a href="https://svelte.dev/" target="_blank" class="text-indigo-500 hover:underline">Svelte</a> on the frontend and <a href="https://pypi.org/project/Flask/" target="_blank" class="text-green-500 hover:underline">Flask</a> as the API backend.</strong></p> <p>It utilizes a <strong>Local LLM</strong> for generating AI responses, demonstrating advanced capabilities in natural language processing and interaction.</p> <p>For more detailed information about the LangChain framework and its capabilities, please refer to their <a href="https://python.langchain.com/v0.2/docs/tutorials/llm_chain/" target="_blank" class="text-blue-500 hover:underline">official documentation</a>.</p>',_,u,f,p,o,m,j,x,q="Send",E,M,H,T=B(h[0]),c=[];for(let n=0;n<T.length;n+=1)c[n]=R(J(h,T,n));let i=h[2]&&K();return{c(){e=b("main"),t=b("h2"),t.textContent=s,a=L(),l=b("div"),l.innerHTML=w,_=L(),u=b("div");for(let n=0;n<c.length;n+=1)c[n].c();f=L(),i&&i.c(),p=L(),o=b("div"),m=b("input"),j=L(),x=b("button"),x.textContent=q,this.h()},l(n){e=y(n,"MAIN",{class:!0});var g=S(e);t=y(g,"H2",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1haun0z"&&(t.textContent=s),a=I(g),l=y(g,"DIV",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-jeqr9w"&&(l.innerHTML=w),_=I(g),u=y(g,"DIV",{class:!0});var r=S(u);for(let D=0;D<c.length;D+=1)c[D].l(r);f=I(r),i&&i.l(r),r.forEach(k),p=I(g),o=y(g,"DIV",{class:!0});var C=S(o);m=y(C,"INPUT",{placeholder:!0,class:!0}),j=I(C),x=y(C,"BUTTON",{class:!0,"data-svelte-h":!0}),N(x)!=="svelte-1uccyc0"&&(x.textContent=q),C.forEach(k),g.forEach(k),this.h()},h(){v(t,"class","text-3xl font-semibold mb-4 text-gray-800"),v(l,"class","mb-4 text-gray-600"),v(u,"class","chat-window border border-gray-300 p-4 h-80 overflow-y-auto mb-4 rounded-lg bg-gray-50"),v(m,"placeholder","Type your message..."),v(m,"class","flex-grow p-2 border border-gray-300 rounded-lg mr-2"),v(x,"class","p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600"),v(o,"class","flex"),v(e,"class","p-6 bg-white rounded-lg shadow-lg mt-8 svelte-1o1pti3")},m(n,g){O(n,e,g),d(e,t),d(e,a),d(e,l),d(e,_),d(e,u);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(u,null);d(u,f),i&&i.m(u,null),d(e,p),d(e,o),d(o,m),U(m,h[1]),d(o,j),d(o,x),E=!0,M||(H=[V(m,"input",h[4]),V(m,"keydown",h[5]),V(x,"click",h[3])],M=!0)},p(n,[g]){if(g&1){T=B(n[0]);let r;for(r=0;r<T.length;r+=1){const C=J(n,T,r);c[r]?c[r].p(C,g):(c[r]=R(C),c[r].c(),c[r].m(u,f))}for(;r<c.length;r+=1)c[r].d(1);c.length=T.length}n[2]?i?g&4&&P(i,1):(i=K(),i.c(),P(i,1),i.m(u,null)):i&&(ne(),G(i,1,1,()=>{i=null}),Z()),g&2&&m.value!==n[1]&&U(m,n[1])},i(n){E||(P(i),E=!0)},o(n){G(i),E=!1},d(n){n&&k(e),$(c,n),i&&i.d(),M=!1,W(H)}}}function oe(h,e,t){let s=[],a="",l=!1;async function w(){if(a.trim()){t(0,s=[...s,{sender:"User",text:a}]),t(2,l=!0);try{const f=await fetch("https://441fe0d3703a.ngrok.app/api/pandasai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a})});if(f.ok){const p=await f.json();t(0,s=[...s,{sender:"ChatGPT",text:p.response}])}else t(0,s=[...s,{sender:"ChatGPT",text:"Failed to get a response from the server."}])}catch{t(0,s=[...s,{sender:"ChatGPT",text:"An error occurred while communicating with the server."}])}finally{t(2,l=!1)}t(1,a="")}}function _(){a=this.value,t(1,a)}return[s,a,l,w,_,f=>f.key==="Enter"&&w()]}class de extends X{constructor(e){super(),Y(this,e,oe,le,Q,{})}}export{de as component};
