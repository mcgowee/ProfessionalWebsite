import{s as K,r as W}from"../chunks/scheduler.CZ49yVq8.js";import{S as X,i as Y,e as b,s as C,c as y,f as T,g as P,j as S,d as w,a as v,b as z,k as f,m as Q,n as D,o as L,p as q,q as Z,r as $,t as M,h as V,l as R,u as ee,v as te,w as se,x as ne,y as ae}from"../chunks/index.9byxY5b-.js";import{e as U}from"../chunks/each.D6YF6ztN.js";import{S as re}from"../chunks/Spinner.Bw0mPyUs.js";function F(d,e,t){const s=d.slice();return s[6]=e[t].sender,s[7]=e[t].text,s[9]=t,s}function B(d){let e,t,s=d[6]+"",n,l,x,_=d[7]+"",u,h;return{c(){e=b("div"),t=b("strong"),n=M(s),l=M(":"),x=C(),u=M(_),this.h()},l(p){e=y(p,"DIV",{class:!0});var o=T(e);t=y(o,"STRONG",{});var g=T(t);n=V(g,s),l=V(g,":"),g.forEach(w),x=S(o),u=V(o,_),o.forEach(w),this.h()},h(){v(e,"class",h=d[6].toLowerCase()+"-message mb-2 svelte-obi4o8")},m(p,o){z(p,e,o),f(e,t),f(t,n),f(t,l),f(e,x),f(e,u)},p(p,o){o&1&&s!==(s=p[6]+"")&&R(n,s),o&1&&_!==(_=p[7]+"")&&R(u,_),o&1&&h!==(h=p[6].toLowerCase()+"-message mb-2 svelte-obi4o8")&&v(e,"class",h)},d(p){p&&w(e)}}}function J(d){let e,t,s;return t=new re({}),{c(){e=b("div"),ee(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var l=T(e);te(t.$$.fragment,l),l.forEach(w),this.h()},h(){v(e,"class","flex justify-center items-center mt-2")},m(n,l){z(n,e,l),se(t,e,null),s=!0},i(n){s||(L(t.$$.fragment,n),s=!0)},o(n){q(t.$$.fragment,n),s=!1},d(n){n&&w(e),ne(t)}}}function le(d){let e,t,s="Chat with Earl",n,l,x=`<strong>This is a simple chat using <span class="text-indigo-500">Svelte</span> on the front end and <span class="text-green-500">Flask</span> as an API AI agent on the backend.</strong>
    It utilizes <strong>Ollama</strong> and <strong>Llama3</strong> for AI responses. 
    <span class="text-red-500 font-bold">This is an initial prototype.</span> A <span class="text-blue-500 font-bold">Retrieval-Augmented Generation (RAG)</span> backend with data retrieved from my social media, documents, and other sources 
    is being created <span class="text-yellow-500">(In Construction)</span>. Additionally, a <span class="text-purple-500 font-bold">SQL AI agent</span> is being developed that can query databases and return analytics based on <span class="text-orange-500 font-bold">SQL Question and Answer AI Chaining</span>.`,_,u,h,p,o,g,j,k,G="Send",E,N,H,A=U(d[0]),c=[];for(let a=0;a<A.length;a+=1)c[a]=B(F(d,A,a));let i=d[2]&&J();return{c(){e=b("main"),t=b("h2"),t.textContent=s,n=C(),l=b("p"),l.innerHTML=x,_=C(),u=b("div");for(let a=0;a<c.length;a+=1)c[a].c();h=C(),i&&i.c(),p=C(),o=b("div"),g=b("input"),j=C(),k=b("button"),k.textContent=G,this.h()},l(a){e=y(a,"MAIN",{class:!0});var m=T(e);t=y(m,"H2",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-no7zzj"&&(t.textContent=s),n=S(m),l=y(m,"P",{class:!0,"data-svelte-h":!0}),P(l)!=="svelte-1tap261"&&(l.innerHTML=x),_=S(m),u=y(m,"DIV",{class:!0});var r=T(u);for(let O=0;O<c.length;O+=1)c[O].l(r);h=S(r),i&&i.l(r),r.forEach(w),p=S(m),o=y(m,"DIV",{class:!0});var I=T(o);g=y(I,"INPUT",{placeholder:!0,class:!0}),j=S(I),k=y(I,"BUTTON",{class:!0,"data-svelte-h":!0}),P(k)!=="svelte-1uccyc0"&&(k.textContent=G),I.forEach(w),m.forEach(w),this.h()},h(){v(t,"class","text-3xl font-semibold mb-4 text-gray-800"),v(l,"class","mb-4 text-gray-600"),v(u,"class","chat-window border border-gray-300 p-4 h-80 overflow-y-auto mb-4 rounded-lg bg-gray-50"),v(g,"placeholder","Type your message..."),v(g,"class","flex-grow p-2 border border-gray-300 rounded-lg mr-2"),v(k,"class","p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600"),v(o,"class","flex"),v(e,"class","p-6 bg-white rounded-lg shadow-lg mt-8 svelte-obi4o8")},m(a,m){z(a,e,m),f(e,t),f(e,n),f(e,l),f(e,_),f(e,u);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(u,null);f(u,h),i&&i.m(u,null),f(e,p),f(e,o),f(o,g),Q(g,d[1]),f(o,j),f(o,k),E=!0,N||(H=[D(g,"input",d[4]),D(g,"keydown",d[5]),D(k,"click",d[3])],N=!0)},p(a,[m]){if(m&1){A=U(a[0]);let r;for(r=0;r<A.length;r+=1){const I=F(a,A,r);c[r]?c[r].p(I,m):(c[r]=B(I),c[r].c(),c[r].m(u,h))}for(;r<c.length;r+=1)c[r].d(1);c.length=A.length}a[2]?i?m&4&&L(i,1):(i=J(),i.c(),L(i,1),i.m(u,null)):i&&(ae(),q(i,1,1,()=>{i=null}),Z()),m&2&&g.value!==a[1]&&Q(g,a[1])},i(a){E||(L(i),E=!0)},o(a){q(i),E=!1},d(a){a&&w(e),$(c,a),i&&i.d(),N=!1,W(H)}}}function oe(d,e,t){let s=[],n="",l=!1;async function x(){if(n.trim()){t(0,s=[...s,{sender:"User",text:n}]),t(2,l=!0);try{const h=await fetch("https://0aa9efc95e9f.ngrok.app/modify_text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})});if(h.ok){const p=await h.json();t(0,s=[...s,{sender:"AI",text:p.modified_text}])}else t(0,s=[...s,{sender:"AI",text:"Failed to get a response from the server."}])}catch{t(0,s=[...s,{sender:"AI",text:"An error occurred while communicating with the server."}])}finally{t(2,l=!1)}t(1,n="")}}function _(){n=this.value,t(1,n)}return[s,n,l,x,_,h=>h.key==="Enter"&&x()]}class fe extends X{constructor(e){super(),Y(this,e,oe,le,K,{})}}export{fe as component};
