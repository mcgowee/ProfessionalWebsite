import{s as _e,r as be}from"../chunks/scheduler.BPZH1ZDm.js";import{S as ve,i as ye,e as m,s as w,c as p,f as E,g as L,j as T,d as I,a as y,b as R,k as l,m as ce,n as V,o as Z,p as le,q as xe,r as pe,t as H,h as M,l as z,u as Ce,v as ke,w as we,x as Te,y as Se}from"../chunks/index.BfFZuMV8.js";import{e as J}from"../chunks/each.D6YF6ztN.js";import{S as Ie}from"../chunks/Spinner.B670ogGe.js";function ue(u,e,t){const a=u.slice();return a[12]=e[t],a}function he(u,e,t){const a=u.slice();return a[15]=e[t].sender,a[16]=e[t].text,a[18]=t,a}function de(u){let e,t,a=u[15]+"",r,i,b,c=u[16]+"",n,g;return{c(){e=m("div"),t=m("strong"),r=H(a),i=H(":"),b=w(),n=H(c),this.h()},l(s){e=p(s,"DIV",{class:!0});var o=E(e);t=p(o,"STRONG",{});var C=E(t);r=M(C,a),i=M(C,":"),C.forEach(I),b=T(o),n=M(o,c),o.forEach(I),this.h()},h(){y(e,"class",g=u[15].toLowerCase()+"-message mb-2 svelte-18ehueg")},m(s,o){R(s,e,o),l(e,t),l(t,r),l(t,i),l(e,b),l(e,n)},p(s,o){o&1&&a!==(a=s[15]+"")&&z(r,a),o&1&&c!==(c=s[16]+"")&&z(n,c),o&1&&g!==(g=s[15].toLowerCase()+"-message mb-2 svelte-18ehueg")&&y(e,"class",g)},d(s){s&&I(e)}}}function fe(u){let e,t,a;return t=new Ie({}),{c(){e=m("div"),Ce(t.$$.fragment),this.h()},l(r){e=p(r,"DIV",{class:!0});var i=E(e);ke(t.$$.fragment,i),i.forEach(I),this.h()},h(){y(e,"class","flex justify-center items-center mt-2")},m(r,i){R(r,e,i),we(t,e,null),a=!0},i(r){a||(Z(t.$$.fragment,r),a=!0)},o(r){le(t.$$.fragment,r),a=!1},d(r){r&&I(e),Te(t)}}}function ge(u){let e,t,a="Generated SQL Queries",r,i,b=J(u[3]),c=[];for(let n=0;n<b.length;n+=1)c[n]=me(ue(u,b,n));return{c(){e=m("div"),t=m("h3"),t.textContent=a,r=w(),i=m("ul");for(let n=0;n<c.length;n+=1)c[n].c();this.h()},l(n){e=p(n,"DIV",{class:!0});var g=E(e);t=p(g,"H3",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-qwg055"&&(t.textContent=a),r=T(g),i=p(g,"UL",{class:!0});var s=E(i);for(let o=0;o<c.length;o+=1)c[o].l(s);s.forEach(I),g.forEach(I),this.h()},h(){y(t,"class","text-2xl font-semibold text-gray-800"),y(i,"class","list-disc pl-6 mt-2"),y(e,"class","mt-4")},m(n,g){R(n,e,g),l(e,t),l(e,r),l(e,i);for(let s=0;s<c.length;s+=1)c[s]&&c[s].m(i,null)},p(n,g){if(g&8){b=J(n[3]);let s;for(s=0;s<b.length;s+=1){const o=ue(n,b,s);c[s]?c[s].p(o,g):(c[s]=me(o),c[s].c(),c[s].m(i,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=b.length}},d(n){n&&I(e),pe(c,n)}}}function me(u){let e,t,a="Function:",r,i=u[12].function+"",b,c,n,g,s,o="Query:",C,A=u[12].query+"",N;return{c(){e=m("li"),t=m("strong"),t.textContent=a,r=w(),b=H(i),c=w(),n=m("br"),g=w(),s=m("strong"),s.textContent=o,C=w(),N=H(A)},l(f){e=p(f,"LI",{});var v=E(e);t=p(v,"STRONG",{"data-svelte-h":!0}),L(t)!=="svelte-1jp1mxk"&&(t.textContent=a),r=T(v),b=M(v,i),c=T(v),n=p(v,"BR",{}),g=T(v),s=p(v,"STRONG",{"data-svelte-h":!0}),L(s)!=="svelte-1mnymb2"&&(s.textContent=o),C=T(v),N=M(v,A),v.forEach(I)},m(f,v){R(f,e,v),l(e,t),l(e,r),l(e,b),l(e,c),l(e,n),l(e,g),l(e,s),l(e,C),l(e,N)},p(f,v){v&8&&i!==(i=f[12].function+"")&&z(b,i),v&8&&A!==(A=f[12].query+"")&&z(N,A)},d(f){f&&I(e)}}}function Le(u){let e,t,a="SQL Query Chatbot",r,i,b=`<strong>This is a simple chat using <span class="text-indigo-500">Svelte</span> on the front end and <span class="text-green-500">Flask</span> as an API AI agent on the backend.</strong>
        It utilizes <strong>Ollama</strong> and <strong>Llama3</strong> for AI responses. 
        <span class="text-red-500 font-bold">This is an initial prototype.</span> A <span class="text-blue-500 font-bold">Retrieval-Augmented Generation (RAG)</span> backend with data retrieved from my social media, documents, and other sources 
        is being created <span class="text-yellow-500">(In Construction)</span>. Additionally, a <span class="text-purple-500 font-bold">SQL AI agent</span> is being developed that can query databases and return analytics based on <span class="text-orange-500 font-bold">SQL Question and Answer AI Chaining</span>.`,c,n,g='<p><strong>Summary of the Chinook Database:</strong></p> <p>The Chinook database is a sample database representing a digital media store. It includes tables for artists, albums, media tracks, invoices, and customers, among others. This makes it an excellent resource for practicing SQL queries and learning database management. The schema includes relationships between these tables, such as artists to albums and invoices to customers.</p> <p>For more detailed information, please refer to the <a href="https://www.sqlitetutorial.net/sqlite-sample-database/" target="_blank" class="text-blue-500 hover:underline">SQLite Tutorial</a>.</p> <img src="/src/assets/ChinookDB.png" alt="Chinook Database Schema" class="w-1/3 mt-4"/>',s,o,C,A="What are the genres?",N,f,v="List the top ten artists with the most albums and add a count.",K,O,ae="Show me all albums by Led Zeppelin.",X,D,re="What is the average invoice total?",Y,q,P,$,U,Q,ee,j,oe="Send",te,F,se,ie,G=J(u[0]),k=[];for(let h=0;h<G.length;h+=1)k[h]=de(he(u,G,h));let x=u[2]&&fe(),S=u[3].length>0&&ge(u);return{c(){e=m("main"),t=m("h2"),t.textContent=a,r=w(),i=m("p"),i.innerHTML=b,c=w(),n=m("div"),n.innerHTML=g,s=w(),o=m("div"),C=m("button"),C.textContent=A,N=w(),f=m("button"),f.textContent=v,K=w(),O=m("button"),O.textContent=ae,X=w(),D=m("button"),D.textContent=re,Y=w(),q=m("div");for(let h=0;h<k.length;h+=1)k[h].c();P=w(),x&&x.c(),$=w(),U=m("div"),Q=m("input"),ee=w(),j=m("button"),j.textContent=oe,te=w(),S&&S.c(),this.h()},l(h){e=p(h,"MAIN",{class:!0});var _=E(e);t=p(_,"H2",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-10lhigc"&&(t.textContent=a),r=T(_),i=p(_,"P",{class:!0,"data-svelte-h":!0}),L(i)!=="svelte-1kbp0l5"&&(i.innerHTML=b),c=T(_),n=p(_,"DIV",{class:!0,"data-svelte-h":!0}),L(n)!=="svelte-18nj28"&&(n.innerHTML=g),s=T(_),o=p(_,"DIV",{class:!0});var d=E(o);C=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),L(C)!=="svelte-1mcoh0r"&&(C.textContent=A),N=T(d),f=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),L(f)!=="svelte-ix2woj"&&(f.textContent=v),K=T(d),O=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),L(O)!=="svelte-12clf35"&&(O.textContent=ae),X=T(d),D=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),L(D)!=="svelte-a53043"&&(D.textContent=re),d.forEach(I),Y=T(_),q=p(_,"DIV",{class:!0});var B=E(q);for(let ne=0;ne<k.length;ne+=1)k[ne].l(B);P=T(B),x&&x.l(B),B.forEach(I),$=T(_),U=p(_,"DIV",{class:!0});var W=E(U);Q=p(W,"INPUT",{placeholder:!0,class:!0}),ee=T(W),j=p(W,"BUTTON",{class:!0,"data-svelte-h":!0}),L(j)!=="svelte-1uccyc0"&&(j.textContent=oe),W.forEach(I),te=T(_),S&&S.l(_),_.forEach(I),this.h()},h(){y(t,"class","text-3xl font-semibold mb-4 text-gray-800"),y(i,"class","mb-4 text-gray-600"),y(n,"class","mb-4 text-gray-600"),y(C,"class","mr-2 p-2 bg-gray-200 rounded-lg hover:bg-gray-300"),y(f,"class","mr-2 p-2 bg-gray-200 rounded-lg hover:bg-gray-300"),y(O,"class","mr-2 p-2 bg-gray-200 rounded-lg hover:bg-gray-300"),y(D,"class","mr-2 p-2 bg-gray-200 rounded-lg hover:bg-gray-300"),y(o,"class","mb-4"),y(q,"class","chat-window border border-gray-300 p-4 h-80 overflow-y-auto mb-4 rounded-lg bg-gray-50"),y(Q,"placeholder","Type your SQL question..."),y(Q,"class","flex-grow p-2 border border-gray-300 rounded-lg mr-2"),y(j,"class","p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600"),y(U,"class","flex"),y(e,"class","p-6 bg-white rounded-lg shadow-lg mt-8 svelte-18ehueg")},m(h,_){R(h,e,_),l(e,t),l(e,r),l(e,i),l(e,c),l(e,n),l(e,s),l(e,o),l(o,C),l(o,N),l(o,f),l(o,K),l(o,O),l(o,X),l(o,D),l(e,Y),l(e,q);for(let d=0;d<k.length;d+=1)k[d]&&k[d].m(q,null);l(q,P),x&&x.m(q,null),l(e,$),l(e,U),l(U,Q),ce(Q,u[1]),l(U,ee),l(U,j),l(e,te),S&&S.m(e,null),F=!0,se||(ie=[V(C,"click",u[6]),V(f,"click",u[7]),V(O,"click",u[8]),V(D,"click",u[9]),V(Q,"input",u[10]),V(Q,"keydown",u[11]),V(j,"click",u[4])],se=!0)},p(h,[_]){if(_&1){G=J(h[0]);let d;for(d=0;d<G.length;d+=1){const B=he(h,G,d);k[d]?k[d].p(B,_):(k[d]=de(B),k[d].c(),k[d].m(q,P))}for(;d<k.length;d+=1)k[d].d(1);k.length=G.length}h[2]?x?_&4&&Z(x,1):(x=fe(),x.c(),Z(x,1),x.m(q,null)):x&&(Se(),le(x,1,1,()=>{x=null}),xe()),_&2&&Q.value!==h[1]&&ce(Q,h[1]),h[3].length>0?S?S.p(h,_):(S=ge(h),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i(h){F||(Z(x),F=!0)},o(h){le(x),F=!1},d(h){h&&I(e),pe(k,h),x&&x.d(),S&&S.d(),se=!1,be(ie)}}}function Ae(u,e,t){let a=[],r="",i=!1,b=[];async function c(){if(r.trim()){t(0,a=[...a,{sender:"User",text:r}]),t(2,i=!0);try{const f=await fetch("https://0aa9efc95e9f.ngrok.app/api/chatbot_query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:r})});if(f.ok){const v=await f.json();t(0,a=[...a,{sender:"AI",text:v.response}]),t(3,b=v.queries)}else t(0,a=[...a,{sender:"AI",text:"Failed to get a response from the server."}])}catch{t(0,a=[...a,{sender:"AI",text:"An error occurred while communicating with the server."}])}finally{t(2,i=!1)}t(1,r="")}}function n(f){t(1,r=f)}const g=()=>n("What are the genres?"),s=()=>n("List the top ten artists with the most albums and add a count."),o=()=>n("Show me all albums by Led Zeppelin."),C=()=>n("What is the average invoice total?");function A(){r=this.value,t(1,r)}return[a,r,i,b,c,n,g,s,o,C,A,f=>f.key==="Enter"&&c()]}class Oe extends ve{constructor(e){super(),ye(this,e,Ae,Le,_e,{})}}export{Oe as component};
