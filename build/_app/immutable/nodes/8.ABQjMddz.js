import{s as B,n as I,r as R}from"../chunks/scheduler.BPZH1ZDm.js";import{S as H,i as J,e as v,s as T,c as b,f as E,g as P,j as k,d as w,a as x,b as q,k as p,m as N,n as j,r as L,t as S,h as U,l as A}from"../chunks/index.BfFZuMV8.js";import{e as D}from"../chunks/each.D6YF6ztN.js";const M="http://172.22.0.2:8000";async function z(l,e=100){try{const s=await(await fetch(`${M}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l,max_tokens:e})})).json();if(s.error)throw new Error(s.error);return s.generated_text}catch(t){return console.error("Error generating text:",t),"An error occurred while generating text."}}function O(l,e,t){const s=l.slice();return s[4]=e[t].sender,s[5]=e[t].text,s}function V(l){let e,t,s=l[4]+"",i,u,d,o,g=l[5]+"",_,y;return{c(){e=v("div"),t=v("span"),i=S(s),u=S(":"),o=T(),_=S(g),y=T(),this.h()},l(f){e=b(f,"DIV",{class:!0});var c=E(e);t=b(c,"SPAN",{class:!0});var m=E(t);i=U(m,s),u=U(m,":"),m.forEach(w),o=k(c),_=U(c,g),y=k(c),c.forEach(w),this.h()},h(){x(t,"class",d=l[4]==="User"?"user":"bot"),x(e,"class","message")},m(f,c){q(f,e,c),p(e,t),p(t,i),p(t,u),p(e,o),p(e,_),p(e,y)},p(f,c){c&2&&s!==(s=f[4]+"")&&A(i,s),c&2&&d!==(d=f[4]==="User"?"user":"bot")&&x(t,"class",d),c&2&&g!==(g=f[5]+"")&&A(_,g)},d(f){f&&w(e)}}}function F(l){let e,t,s="Chatbot",i,u,d,o,g,_,y="Send",f,c,m=D(l[1]),r=[];for(let n=0;n<m.length;n+=1)r[n]=V(O(l,m,n));return{c(){e=v("div"),t=v("h1"),t.textContent=s,i=T(),u=v("div");for(let n=0;n<r.length;n+=1)r[n].c();d=T(),o=v("input"),g=T(),_=v("button"),_.textContent=y,this.h()},l(n){e=b(n,"DIV",{class:!0});var h=E(e);t=b(h,"H1",{"data-svelte-h":!0}),P(t)!=="svelte-1fubonr"&&(t.textContent=s),i=k(h),u=b(h,"DIV",{class:!0});var a=E(u);for(let C=0;C<r.length;C+=1)r[C].l(a);a.forEach(w),d=k(h),o=b(h,"INPUT",{type:!0,placeholder:!0}),g=k(h),_=b(h,"BUTTON",{"data-svelte-h":!0}),P(_)!=="svelte-93q973"&&(_.textContent=y),h.forEach(w),this.h()},h(){x(u,"class","messages"),x(o,"type","text"),x(o,"placeholder","Type your message..."),x(e,"class","chat-container svelte-7t9l2w")},m(n,h){q(n,e,h),p(e,t),p(e,i),p(e,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(u,null);p(e,d),p(e,o),N(o,l[0]),p(e,g),p(e,_),f||(c=[j(o,"input",l[3]),j(_,"click",l[2])],f=!0)},p(n,[h]){if(h&2){m=D(n[1]);let a;for(a=0;a<m.length;a+=1){const C=O(n,m,a);r[a]?r[a].p(C,h):(r[a]=V(C),r[a].c(),r[a].m(u,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=m.length}h&1&&o.value!==n[0]&&N(o,n[0])},i:I,o:I,d(n){n&&w(e),L(r,n),f=!1,R(c)}}}function G(l,e,t){let s="",i=[];async function u(){if(s.trim()){t(1,i=[...i,{sender:"User",text:s}]);const o=await z(s);t(1,i=[...i,{sender:"Bot",text:o}]),t(0,s="")}}function d(){s=this.value,t(0,s)}return[s,i,u,d]}class X extends H{constructor(e){super(),J(this,e,G,F,B,{})}}export{X as component};
